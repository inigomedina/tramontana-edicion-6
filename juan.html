<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ejercicio: Llamada con Juan</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
      line-height: 1.6;
      color: #333;
    }
    
    h1 {
      font-size: 24px;
      margin-bottom: 20px;
    }
    
    h2 {
      font-size: 18px;
      margin-top: 30px;
      margin-bottom: 15px;
    }
    
    p {
      margin-bottom: 15px;
    }
    
    .call-section {
      margin: 40px 0;
      padding: 30px 0;
      text-align: center;
      border-top: 1px solid #ddd;
      border-bottom: 1px solid #ddd;
    }
    
    #vapi-button {
      font-size: 60px;
      background: none;
      border: none;
      cursor: pointer;
      padding: 20px;
    }
    
    #vapi-button:hover {
      opacity: 0.7;
    }
    
    .status {
      margin-top: 15px;
      font-size: 14px;
      color: #666;
    }
  </style>
</head>
<body>
  <h1>Ejercicio: Conversaci√≥n con Juan</h1>
  
  <h2>Contexto</h2>
  <p>
    Acabas de presentar mejoras en el proceso de onboarding al CEO. Al final de la reuni√≥n 
    dice: <em>"Pues a mi amigo Juan le fue mal el alta. Si quieres, puedes hablar con √©l."</em>
  </p>
  
  <p>
    <strong>Tu tarea:</strong> Gestionar esta conversaci√≥n con empat√≠a y profesionalidad.
  </p>
  
  <div class="call-section">
    <button id="vapi-button">üìû</button>
    <div class="status" id="status">Presiona para llamar</div>
  </div>
  
  <h2>Objetivos</h2>
  <p>
    ‚Ä¢ Demostrar empat√≠a genuina<br>
    ‚Ä¢ Hacer preguntas abiertas<br>
    ‚Ä¢ Escuchar antes de justificar<br>
    ‚Ä¢ Identificar acciones concretas
  </p>

  <script src="https://cdn.vapi.ai/web.js"></script>
  <script>
    // Reemplaza estos valores con los tuyos
    const VAPI_PUBLIC_KEY = 'a5582940-3819-4772-b4bc-e19abf730ff0';
    const ASSISTANT_ID = '6343aa62-d821-4b38-a783-af0a83567271';
    const vapi = new Vapi(VAPI_PUBLIC_KEY);
    const button = document.getElementById('vapi-button');
    const status = document.getElementById('status');
    let isActive = false;
    
    vapi.on('call-start', () => {
      isActive = true;
      button.textContent = 'üìµ';
      status.textContent = 'Conectado con Juan';
    });
    
    vapi.on('call-end', () => {
      isActive = false;
      button.textContent = 'üìû';
      status.textContent = 'Llamada finalizada';
    });
    
    vapi.on('speech-start', () => {
      status.textContent = 'Juan est√° hablando...';
    });
    
    vapi.on('speech-end', () => {
      if (isActive) status.textContent = 'Tu turno';
    });
    
    vapi.on('error', (e) => {
      status.textContent = 'Error: ' + e.message;
      button.textContent = 'üìû';
      isActive = false;
    });
    
    button.addEventListener('click', () => {
      if (!isActive) {
        status.textContent = 'Conectando...';
        vapi.start(ASSISTANT_ID);
      } else {
        vapi.stop();
      }
    });
  </script>
</body>
</html>
